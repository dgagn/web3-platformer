<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>JSDoc: Source: backtop.ts</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link
      type="text/css"
      rel="stylesheet"
      href="styles/prettify-tomorrow.css"
    />
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css" />
  </head>

  <body>
    <div id="main">
      <h1 class="page-title">Source: backtop.ts</h1>

      <section>
        <article>
          <pre class="prettyprint source linenums"><code>import $ from 'jquery';

/**
 * Creates a backtop component. The backtop creates a button
 * that brings the user back to the top of the page when
 * clicked.
 *
 * @return {JQuery&lt;HTMLAnchorElement>} - returns a jquery element
 * of the backtop.
 * @memberOf Components
 */
export function createBacktop() {
  return $(`
&lt;a href="javascript:void(0)" class="back-top">
  &lt;svg
    width="16"
    height="16"
    focusable="false"
    class="back-top-icon"
    color="#609d4e"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 448 512"
  >
    &lt;path
      fill="currentColor"
      d="M240.971 130.524l194.343 194.343c9.373 9.373 9.373 24.569 0 33.941l-22.667 22.667c-9.357 9.357-24.522 9.375-33.901.04L224 227.495 69.255 381.516c-9.379 9.335-24.544 9.317-33.901-.04l-22.667-22.667c-9.373-9.373-9.373-24.569 0-33.941L207.03 130.525c9.372-9.373 24.568-9.373 33.941-.001z"
    >&lt;/path>
  &lt;/svg>
&lt;/a>
`);
}

/**
 * Creates a back-top component from a jQuery selector.
 *
 * @param {string} selector - jquery selector for the element
 * @param {{offset: number, scrollDuration: number}} options - the options are
 * optionals. Offset is the height at which it shows and the scroll duration
 * is the time the animation takes to go back to the top.
 * @memberOf Components
 */
export function backtop(selector, {offset = 300, scrollDuration = 700} = {}) {
  const $backtop = $(selector);
  let scrolling = false;

  if (!$backtop) {
    return;
  }

  $(window).on('scroll', () => {
    if (!scrolling) {
      scrolling = true;
      requestAnimationFrame(backtopLogic);
    }
  });

  $backtop.on('click', e => {
    e.preventDefault();
    scrollTo(0, scrollDuration);
  });

  /**
   * Adds or remove the main class to make the back-top visibility toggle.
   */
  function backtopLogic() {
    const windowTop = window.scrollY || document.documentElement.scrollTop;
    windowTop > offset
      ? $backtop.addClass('back-top--visible')
      : $backtop.removeClass('back-top--visible');
    scrolling = false;
  }
}

/**
 * Creates a smooth ease in out quad for javascript animations.
 *
 * @param {number} t - the progress of a animation
 * @param {number} b - the start of a animation
 * @param {number} c - the difference between the end and start of animation
 * @param {number} d - the animation duration
 * @return {number} - the smooth value of the animation
 * @memberOf Components
 */
function easeInOutQuad(t, b, c, d) {
  t /= d / 2;
  if (t &lt; 1) return (c / 2) * t * t + b;
  t--;
  return (-c / 2) * (t * (t - 2) - 1) + b;
}

/**
 * Scrolls to a specified y position in a certain
 * duration. Makes the scroll smooth.
 *
 * @param {number} final - the final y value
 * @param {number} duration - the duration in ms
 * @param {Function=} cb - a callback when it has scroll to the position
 * @memberOf Components
 */
function scrollTo(final, duration, cb = undefined) {
  const start = window.scrollY || document.documentElement.scrollTop;
  let currentTime = null;

  const animateScroll = function (timestamp) {
    if (!currentTime) currentTime = timestamp;
    let progress = timestamp - currentTime;
    if (progress > duration) progress = duration;
    const val = easeInOutQuad(progress, start, final - start, duration);
    window.scrollTo(0, val);
    if (progress &lt; duration) {
      requestAnimationFrame(animateScroll);
    } else {
      cb &amp;&amp; cb();
    }
  };

  requestAnimationFrame(animateScroll);
}
</code></pre>
        </article>
      </section>
    </div>

    <nav>
      <h2><a href="index.html">Home</a></h2>
      <h3>Namespaces</h3>
      <ul>
        <li><a href="Components.html">Components</a></li>
      </ul>
      <h3><a href="global.html">Global</a></h3>
    </nav>

    <br class="clear" />

    <footer>
      Documentation generated by
      <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Mon Oct 25
      2021 18:58:42 GMT-0400 (Eastern Daylight Time)
    </footer>

    <script>
      prettyPrint();
    </script>
    <script src="scripts/linenumber.js"></script>
  </body>
</html>
